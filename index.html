<html>
<script src='https://d3js.org/d3.v5.min.js'></script>
<style> circle {fill: lightblue; stroke: black;} </style>
<style> path {stroke: black;}</style>
<body onload='init()'>
<svg width=600 height=600>
</svg>
<script>
async function init() {
////////////////////////////////////////////////////////////////////////////////////

// FINAL VERSION

const data = await d3.csv('https://hromadka.github.io/data/titanicdatabase_curated_mini.csv');
//var data = [4,8,15,16,23,42];
var color = ['pink','lightyellow','lightgreen','lightcyan','lightblue','violet'];
var arc = d3.arc().innerRadius(0).outerRadius(100);
//var pie = d3.pie();
var pie = d3.pie().value(function(d) { 
                return d.Survived; 
            });


// set the dimensions and margins of the graph
var margin = 50,
    width = 500,
    height = 500;
/*
  var xScale = d3.scaleLog().base(10)
    .domain([10,150])
    .range([ 0, (width-(2*margin)) ]);

  var yScale = d3.scaleLog().base(10)
    .domain([10,150])
    .range([height - margin, 0]);
*/

// append the svg object to the body of the page
var svg = d3.select('svg')
  .append("g")
    .attr("transform",
          "translate(" + 3*margin + "," + 3*margin + ")");


svg.selectAll("path")
.data(pie(data))
.enter().append("path")
.attr("d", arc )
.attr("fill", function(d, i) { return color[i]; })
;

/*
  svg.selectAll("circle")
    .data(data)
    .enter().append("circle")
    .attr("cx", function (d) { return xScale(d.AverageCityMPG) } )
    .attr("cy", function (d) { return yScale(d.AverageHighwayMPG) } )
    .attr("r", function (d) { return parseInt(d.EngineCylinders)+2  } );


    // axes
    var xAxis = d3.axisBottom()
    	.scale(xScale)
        .tickValues([10,20,50,100])
    	.tickFormat(d3.format('~s'));

    var yAxis = d3.axisLeft()
    	.scale(yScale)
        .tickValues([10,20,50,100])
    	.tickFormat(d3.format('~s'));

    svg.append('g')
      	.attr('transform', 'translate(' + [0, 0] + ')')
      	.call(yAxis);

    svg.append('g')
      	.attr('transform', 'translate(' + [0, height-margin] + ')')
      	.call(xAxis);
*/
////////////////////////////////////////////////////////////////////
}
</script>
</body>
</html>
