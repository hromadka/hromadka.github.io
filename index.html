<html>
<script src='https://d3js.org/d3.v5.min.js'></script>
<style> path {stroke: black;}</style>
<body>
<svg width=300 height=300>
</svg>
<script>
var data = [4,8,15,16,23,42];
var color = ['pink','lightyellow','lightgreen','lightcyan','lightblue','violet'];
var pie = d3.pie();
var arc = d3.arc().innerRadius(0).outerRadius(100);
////////////////////////////////////////////////////////////////////////////////////

// FINAL VERSION

const data = await d3.csv('data/cars2017.csv');


// set the dimensions and margins of the graph
var margin = 50,
    width = 300,
    height = 250;

  var xScale = d3.scaleLog().base(10)
    .domain([10,150])
    .range([ 0, (width-(2*margin)) ]);

  var yScale = d3.scaleLog().base(10)
    .domain([10,150])
    .range([height - margin, 0]);

//  var rScale = d3.sum([d.EngineCylinders,2]);
console.log("rscale!");


//var xData = function (d) { return xScale(d.AverageCityMPG); };
//var yData = function (d) { return yScale(d.AverageHighwayMPG); };
//var rData = function (d) { return rScale(d.EngineCylinders); };


// append the svg object to the body of the page
var svg = d3.select('svg')
  .append("g")
    .attr("transform",
          "translate(" + 50+ "," + 50+ ")");


  svg.selectAll("circle")
    .data(data)
    .enter().append("circle")
    .attr("cx", function (d) { return xScale(d.AverageCityMPG) } )
    .attr("cy", function (d) { return yScale(d.AverageHighwayMPG) } )
    .attr("r", function (d) { return parseInt(d.EngineCylinders)+2  } );
// autograder note:
// "DOM elements that are wrong will be in red, any missing ones will be shown in red italics parentheses."
// This means that I had errors that were generating no results in the inner functions
// not that I was generating parentheses around a badly typed result.  Arrgh.


    // axes
    var xAxis = d3.axisBottom()
    	.scale(xScale)
        .tickValues([10,20,50,100])
    	.tickFormat(d3.format('~s'));

    var yAxis = d3.axisLeft()
    	.scale(yScale)
        .tickValues([10,20,50,100])
    	.tickFormat(d3.format('~s'));

    svg.append('g')
      	.attr('transform', 'translate(' + [margin, margin] + ')')
      	.call(yAxis);

    svg.append('g')
      	.attr('transform', 'translate(' + [margin, height] + ')')
      	.call(xAxis);

////////////////////////////////////////////////////////////////////
</script>
</body>
</html>
